PrefabFiles = {
	"suri",
	"suri_none",
    "goobah",
    --"goobah_coin",
    --"goobah_portal",
    --"goobah_spawner",
    "cyon",
	"cyon_none",
    "meeta",
	"meeta_none",
    "maeve",
	"maeve_none",
    "echo",
	"echo_none",
    "cyoncane",
    "hat_cyon",
    "hat_meeta",    
    "maevesword",
    "goldcoins",
    "potion01",
    --"potion02",
    --"potion03"
    "echogun",
   -- "echobullets",
}

Assets = {
   -- Asset("SOUNDPACKAGE", "sound/suri.fev"),
   -- Asset("SOUND", "sound/suri.fdp"),    
  
    Asset( "IMAGE", "images/saveslot_portraits/suri.tex" ),
    Asset( "ATLAS", "images/saveslot_portraits/suri.xml" ),

    Asset( "IMAGE", "images/selectscreen_portraits/suri.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/suri.xml" ),
	
    Asset( "IMAGE", "images/selectscreen_portraits/suri_silho.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/suri_silho.xml" ),

    Asset( "IMAGE", "bigportraits/suri.tex" ),
    Asset( "ATLAS", "bigportraits/suri.xml" ),
	
	Asset( "IMAGE", "images/map_icons/suri.tex" ),
	Asset( "ATLAS", "images/map_icons/suri.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_suri.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_suri.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_ghost_suri.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_ghost_suri.xml" ),
	
	Asset( "IMAGE", "images/avatars/self_inspect_suri.tex" ),
    Asset( "ATLAS", "images/avatars/self_inspect_suri.xml" ),
	
	Asset( "IMAGE", "images/names_suri.tex" ),
    Asset( "ATLAS", "images/names_suri.xml" ),

    Asset("IMAGE", "images/crafting_menu_avatars/avatar_suri.tex"),
    Asset("ATLAS", "images/crafting_menu_avatars/avatar_suri.xml"),
	
	Asset( "IMAGE", "images/names_gold_suri.tex" ),
    Asset( "ATLAS", "images/names_gold_suri.xml" ),

    Asset( "IMAGE", "images/goobah_spawner.tex" ),
    Asset( "ATLAS", "images/goobah_spawner.xml" ),
 --
    Asset("IMAGE", "bigportraits/cyon.tex"),
    Asset("ATLAS", "bigportraits/cyon.xml"),

    Asset("IMAGE", "images/avatars/avatar_ghost_cyon.tex"),
    Asset("ATLAS", "images/avatars/avatar_ghost_cyon.xml"),

    Asset("IMAGE", "images/avatars/avatar_cyon.tex"),
    Asset("ATLAS", "images/avatars/avatar_cyon.xml"),

    Asset("IMAGE", "images/avatars/self_inspect_cyon.tex"),
    Asset("ATLAS", "images/avatars/self_inspect_cyon.xml"),
    
    Asset("IMAGE", "images/crafting_menu_avatars/avatar_cyon.tex"),
    Asset("ATLAS", "images/crafting_menu_avatars/avatar_cyon.xml"),

    Asset("IMAGE", "images/inventoryimages/cyoncane.tex"),
    Asset("ATLAS", "images/inventoryimages/cyoncane.xml"),

    Asset("IMAGE", "images/inventoryimages/cyonhat.tex"),
    Asset("ATLAS", "images/inventoryimages/cyonhat.xml"),
    
    Asset("IMAGE", "images/map_icons/cyon.tex"),
    Asset("ATLAS", "images/map_icons/cyon.xml"),

    Asset("IMAGE", "images/saveslot_portraits/cyon.tex"),
    Asset("ATLAS", "images/saveslot_portraits/cyon.xml"),

    Asset("IMAGE", "images/names_gold_cyon.tex"),
    Asset("ATLAS", "images/names_gold_cyon.xml"),

	Asset("IMAGE", "images/names_cyon.tex"),
    Asset("ATLAS", "images/names_cyon.xml"),
 --
    Asset("IMAGE", "bigportraits/meeta.tex"),
    Asset("ATLAS", "bigportraits/meeta.xml"),

    Asset("IMAGE", "images/avatars/avatar_ghost_meeta.tex"),
    Asset("ATLAS", "images/avatars/avatar_ghost_meeta.xml"),

    Asset("IMAGE", "images/avatars/avatar_meeta.tex"),
    Asset("ATLAS", "images/avatars/avatar_meeta.xml"),

    Asset("IMAGE", "images/avatars/self_inspect_meeta.tex"),
    Asset("ATLAS", "images/avatars/self_inspect_meeta.xml"),
    
    Asset("IMAGE", "images/crafting_menu_avatars/avatar_meeta.tex"),
    Asset("ATLAS", "images/crafting_menu_avatars/avatar_meeta.xml"),

    Asset("IMAGE", "images/inventoryimages/meetahat.tex"),
    Asset("ATLAS", "images/inventoryimages/meetahat.xml"),
    
    Asset("IMAGE", "images/map_icons/meeta.tex"),
    Asset("ATLAS", "images/map_icons/meeta.xml"),

    Asset("IMAGE", "images/saveslot_portraits/meeta.tex"),
    Asset("ATLAS", "images/saveslot_portraits/meeta.xml"),

    Asset("IMAGE", "images/names_gold_meeta.tex"),
    Asset("ATLAS", "images/names_gold_meeta.xml"),

	Asset("IMAGE", "images/names_meeta.tex"),
    Asset("ATLAS", "images/names_meeta.xml"),

    Asset("IMAGE", "images/crafting_menu_avatars/avatar_meeta.tex"),
    Asset("ATLAS", "images/crafting_menu_avatars/avatar_meeta.xml"),
 --
    Asset( "IMAGE", "images/saveslot_portraits/maeve.tex" ),
    Asset( "ATLAS", "images/saveslot_portraits/maeve.xml" ),

    Asset( "IMAGE", "images/selectscreen_portraits/maeve.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/maeve.xml" ),
	
    Asset( "IMAGE", "images/selectscreen_portraits/maeve_silho.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/maeve_silho.xml" ),

    Asset( "IMAGE", "bigportraits/maeve.tex" ),
    Asset( "ATLAS", "bigportraits/maeve.xml" ),

    Asset("IMAGE", "images/inventoryimages/maevesword.tex"),
    Asset("ATLAS", "images/inventoryimages/maevesword.xml"),
	
	Asset( "IMAGE", "images/map_icons/maeve.tex" ),
	Asset( "ATLAS", "images/map_icons/maeve.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_maeve.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_maeve.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_ghost_maeve.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_ghost_maeve.xml" ),
	
	Asset( "IMAGE", "images/avatars/self_inspect_maeve.tex" ),
    Asset( "ATLAS", "images/avatars/self_inspect_maeve.xml" ),
	
	Asset( "IMAGE", "images/names_maeve.tex" ),
    Asset( "ATLAS", "images/names_maeve.xml" ),
	
	Asset( "IMAGE", "images/names_gold_maeve.tex" ),
    Asset( "ATLAS", "images/names_gold_maeve.xml" ),
 --
    Asset( "IMAGE", "images/saveslot_portraits/echo.tex" ),
    Asset( "ATLAS", "images/saveslot_portraits/echo.xml" ),

    Asset( "IMAGE", "images/selectscreen_portraits/echo.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/echo.xml" ),
	
    Asset( "IMAGE", "images/selectscreen_portraits/echo_silho.tex" ),
    Asset( "ATLAS", "images/selectscreen_portraits/echo_silho.xml" ),

    Asset( "IMAGE", "bigportraits/echo.tex" ),
    Asset( "ATLAS", "bigportraits/echo.xml" ),
	
	Asset( "IMAGE", "images/map_icons/echo.tex" ),
	Asset( "ATLAS", "images/map_icons/echo.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_echo.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_echo.xml" ),
	
	Asset( "IMAGE", "images/avatars/avatar_ghost_echo.tex" ),
    Asset( "ATLAS", "images/avatars/avatar_ghost_echo.xml" ),
	
	Asset( "IMAGE", "images/avatars/self_inspect_echo.tex" ),
    Asset( "ATLAS", "images/avatars/self_inspect_echo.xml" ),
	
	Asset( "IMAGE", "images/names_echo.tex" ),
    Asset( "ATLAS", "images/names_echo.xml" ),
	
	Asset( "IMAGE", "images/names_gold_echo.tex" ),
    Asset( "ATLAS", "images/names_gold_echo.xml" ),

    Asset("IMAGE", "images/inventoryimages/echogun.tex"),
    Asset("ATLAS", "images/inventoryimages/echogun.xml"),

  --  Asset("IMAGE", "images/inventoryimages/echobullets.tex"),
   -- Asset("ATLAS", "images/inventoryimages/echobullets.xml"),

    Asset("IMAGE", "images/crafting_menu_avatars/avatar_echo.tex"),
    Asset("ATLAS", "images/crafting_menu_avatars/avatar_echo.xml"),

    Asset( "IMAGE", "images/inventoryimages/goldcoins.tex" ),
    Asset( "ATLAS", "images/inventoryimages/goldcoins.xml" ),

    Asset( "IMAGE", "images/inventoryimages/potion01.tex" ),
    Asset( "ATLAS", "images/inventoryimages/potion01.xml" ),

}

-- Test if STRINGS is available


AddMinimapAtlas("images/map_icons/suri.xml")
AddMinimapAtlas("images/map_icons/cyon.xml")
AddMinimapAtlas("images/map_icons/meeta.xml")
AddMinimapAtlas("images/map_icons/maeve.xml")
AddMinimapAtlas("images/map_icons/echo.xml")

local require = GLOBAL.require
local STRINGS = GLOBAL.STRINGS
local NAMES = STRINGS.NAMES
local GENERIC = STRINGS.CHARACTERS.GENERIC.DESCRIBE

STRINGS.CHARACTER_TITLES.suri = "The Goobah Emperor"
STRINGS.CHARACTER_NAMES.suri = "Suri Solari"
STRINGS.CHARACTER_DESCRIPTIONS.suri = "*Chronic Goobism"
STRINGS.CHARACTER_QUOTES.suri = "\"Wahh Rrah Grahh\""
STRINGS.CHARACTER_SURVIVABILITY.suri = "Slim"
--
STRINGS.CHARACTER_TITLES.cyon = "The Tanuki Thief"
STRINGS.CHARACTER_NAMES.cyon = "Cyon Hart"
STRINGS.CHARACTER_DESCRIPTIONS.cyon = "*Thievery"
STRINGS.CHARACTER_QUOTES.cyon = "\"I'm not a raccoon!\""
STRINGS.CHARACTER_SURVIVABILITY.cyon = "Slim"
--
STRINGS.CHARACTER_TITLES.meeta = "The Alluring Witch"
STRINGS.CHARACTER_NAMES.meeta = "Meeta Osita"
STRINGS.CHARACTER_DESCRIPTIONS.meeta = "*Yeppers"
STRINGS.CHARACTER_QUOTES.meeta = "\"Erm\""
STRINGS.CHARACTER_SURVIVABILITY.meeta = "Slim"
--
STRINGS.CHARACTER_TITLES.maeve = "The Pink Ninja"
STRINGS.CHARACTER_NAMES.maeve = "Maeve Kagekiri"
STRINGS.CHARACTER_DESCRIPTIONS.maeve = "*Soulsborne Addiction"
STRINGS.CHARACTER_QUOTES.maeve = "\"Hey Mae! I'm a ninja.\""
STRINGS.CHARACTER_SURVIVABILITY.maeve = "Slim"
--
STRINGS.CHARACTER_TITLES.echo = "The Cyborg Boss"
STRINGS.CHARACTER_NAMES.echo = "Echo Lyne"
STRINGS.CHARACTER_DESCRIPTIONS.echo = "*Boss is awesome"
STRINGS.CHARACTER_QUOTES.echo = "\"Erm\""
STRINGS.CHARACTER_SURVIVABILITY.echo = "Slim"
--
STRINGS.CHARACTERS.SURI = require "speech_suri"
STRINGS.CHARACTERS.CYON = require "speech_cyon"
STRINGS.CHARACTERS.MEETA = require "speech_meeta"
STRINGS.CHARACTERS.MAEVE = require "speech_maeve"
STRINGS.CHARACTERS.ECHO = require "speech_echo"

STRINGS.NAMES.SURI = "suri"
STRINGS.SKIN_NAMES.suri_none = "suri"
STRINGS.NAMES.CYON = "cyon"
STRINGS.SKIN_NAMES.cyon_none = "cyon"
STRINGS.NAMES.MEETA = "meeta"
STRINGS.SKIN_NAMES.meeta_none = "meeta"
STRINGS.NAMES.MAEVE = "maeve"
STRINGS.SKIN_NAMES.maeve_none = "maeve"
STRINGS.NAMES.ECHO = "echo"
STRINGS.SKIN_NAMES.echo_none = "echo"


STRINGS.NAMES.CYONCANE = "Cyon's Cane"
STRINGS.NAMES.CYONHAT = "Cyon's Hat"
STRINGS.NAMES.MEETAHAT = "Meeta's Hat"
STRINGS.NAMES.POTION01 = "Meeta's Potion 1"
STRINGS.NAMES.MAEVESWORD = "Maeve's Katana"
STRINGS.NAMES.ECHOGUN = "Echo's Gun"
STRINGS.NAMES.GOLDCOINS = "Suri's Gold Coins"

--Custom item text
NAMES.GOOBAH_SPAWNER = "Goobah Spawner"
GENERIC.GOOBAH_SPAWNER = "Goobah?"
NAMES.GOOBAH_PORTAL = "Goobah Portal"
GENERIC.GOOBAH_PORTAL = "Goobah?"
NAMES.GOOBAH_COIN = "Goobah Coin"
GENERIC.GOOBAH_COIN = "Maybe a Goobah might want this?"

--Custom creatures
NAMES.GOOBAH = "Goobah"
GENERIC.GOOBAH = "Hallo Goobah!"

local skin_modes = {
    { 
        type = "ghost_skin",
        anim_bank = "ghost",
        idle_anim = "idle", 
        scale = 0.75, 
        offset = { 0, -25 } 
    },
}

local cyon_items_override = 
{
    cyoncane = {atlas = "images/inventoryimages/cyoncane.xml"},
    cyonhat = {atlas = "images/inventoryimages/cyonhat.xml"}
}

local meeta_items_override = 
{
    meetahat = {atlas = "images/inventoryimages/meetahat.xml"},
    potion01 = {atlas = "images/inventoryimages/potion01.xml"}
}

local maeve_items_override = 
{
    maevesword = {atlas = "images/inventoryimages/maevesword.xml"}
}

local suri_items_override = 
{
    goldcoins = {atlas = "images/inventoryimages/goldcoins.xml"}
}

local echo_items_override = 
{
    maevesword = {atlas = "images/inventoryimages/echogun.xml"},
}

TUNING.STARTING_ITEM_IMAGE_OVERRIDE = type(TUNING.STARTING_ITEM_IMAGE_OVERRIDE) == "table" and GLOBAL.MergeMaps(TUNING.STARTING_ITEM_IMAGE_OVERRIDE, cyon_items_override) or cyon_items_override
TUNING.STARTING_ITEM_IMAGE_OVERRIDE = type(TUNING.STARTING_ITEM_IMAGE_OVERRIDE) == "table" and GLOBAL.MergeMaps(TUNING.STARTING_ITEM_IMAGE_OVERRIDE, echo_items_override) or echo_items_override
TUNING.STARTING_ITEM_IMAGE_OVERRIDE = type(TUNING.STARTING_ITEM_IMAGE_OVERRIDE) == "table" and GLOBAL.MergeMaps(TUNING.STARTING_ITEM_IMAGE_OVERRIDE, meeta_items_override) or meeta_items_override
TUNING.STARTING_ITEM_IMAGE_OVERRIDE = type(TUNING.STARTING_ITEM_IMAGE_OVERRIDE) == "table" and GLOBAL.MergeMaps(TUNING.STARTING_ITEM_IMAGE_OVERRIDE, maeve_items_override) or maeve_items_override
TUNING.STARTING_ITEM_IMAGE_OVERRIDE = type(TUNING.STARTING_ITEM_IMAGE_OVERRIDE) == "table" and GLOBAL.MergeMaps(TUNING.STARTING_ITEM_IMAGE_OVERRIDE, suri_items_override) or suri_items_override

AddModCharacter("suri", "FEMALE", skin_modes)
AddModCharacter("cyon", "FEMALE", skin_modes)
AddModCharacter("meeta", "FEMALE", skin_modes)
AddModCharacter("maeve", "FEMALE", skin_modes)
AddModCharacter("echo", "FEMALE", skin_modes)

-- Recipes
--STRINGS.NAMES.SURITAB = "Suri Tab"
--STRINGS.TABS.SURITAB = "Suri Tab"

STRINGS.RECIPE_DESC.GOLDCOINS = "Shiny and valuable."

local function AddCustomRecipe()
    local Ingredient = GLOBAL.Ingredient
    --local AddRecipe2 = GLOBAL.AddRecipe2
    local RECIPETABS = GLOBAL.RECIPETABS
    local TECH = GLOBAL.TECH

    -- Debugging: Print statements to check if the function is being called
    print("AddCustomRecipe function called")

    -- Define the custom recipe
    local recipe = AddRecipe(
        "goldcoins", -- The prefab name of your custom item
        { Ingredient("rocks", 2) }, -- Ingredients
        RECIPETABS.SURVIVAL, -- The tab where your recipe will appear
        TECH.NONE, -- Tech level
        nil, -- No placer (optional)
        nil, -- No min spacing (optional)
        nil, -- No nounlock (optional)
        nil,
        "dragoobah", -- Builder tag (character-specific)
        "images/inventoryimages/goldcoins.xml", -- Atlas path
        "images/inventoryimages/goldcoins.tex" -- Texture file
    )

    -- Debugging: Print statements to check if the recipe is being added
    if recipe then
        print("Gold Coins recipe added successfully")
    else
        print("Failed to add Gold Coins recipe")
    end
end

-- Ensure assets are loaded before adding recipes
AddSimPostInit(AddCustomRecipe)

local gold_buff_duration = 5

local function gold_attach(inst, target)
    if target.components.health ~= nil then
        target.components.combat.externaldamagemultipliers:SetModifier(inst, 2.0, "damage_from_gold")
        target.components.combat.externaldamagetakenmultipliers:SetModifier(inst, 2.0, "damage_from_gold")
    end
end

local function gold_detach(inst, target)
    if target.components.health ~= nil then
        target.components.combat.externaldamagemultipliers:RemoveModifier(inst, "damage_from_gold")
    end
end

local function create_gold_buff(inst)
    MakeBuff("gold_buff", gold_attach, nil, gold_detach, gold_buff_duration, 2)
end

AddPrefabPostInit("foodbuffs", create_gold_buff)